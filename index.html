<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>原神，启动！</title>
    <link rel="shortcut icon" href="./favicon.ico" type="image/x-icon">
    <link rel="stylesheet" href="./ys/style.css">
</head>

<body>
    <div class="load">
        <img src="./ys/OP_s.png">
    </div>
    <audio src="./ys/OPGo.mp3"></audio>

    <script src="https://cdn.staticfile.org/sweetalert/2.1.2/sweetalert.min.js"></script>
    <script>
        const openGenshinImpact = time => {
            const gameURLScheme = 'genshinimpact://'

            const redirectToAppStore = () => {
                window.location.href = 'https://ostarso.github.io/pc.html'
            }

            const redirectToGooglePlay = () => {
                window.location.href = 'https://app.mi.com/details?id=com.miHoYo.ys.mi&ref=search'
            }

            if (/iPad|iPhone|iPod/.test(navigator.userAgent)) {
                setTimeout(() => {
                    window.location.href = gameURLScheme
                    redirectToAppStore()
                }, time)
            } else if (/Android/.test(navigator.userAgent)) {
                setTimeout(() => {
                    const intentURI = `intent://${gameURLScheme}#Intent;package=com.miHoYo.GenshinImpact;scheme=${gameURLScheme};end`
                    window.location.href = intentURI
                    
                    redirectToGooglePlay()
                }, time)
            } else {
                setTimeout(redirectToAppStore, time)
            }
        }

        document.addEventListener('DOMContentLoaded', () => {
            const audio = document.querySelector('audio')
            const load = document.querySelector('.load')

            swal({
                title: '',
                text: '确定启动原神么？',
                icon: 'warning',
                button: '确定',
                closeOnClickOutside: false,
            }).then(() => {
                document.body.addEventListener('click', () => {
                    load.classList.add('activate')
                    audio.play()
                    openGenshinImpact(3500)
                })
            })
        })
    </script>
</body>

</html>